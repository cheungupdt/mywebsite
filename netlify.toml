[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  NODE_VERSION = "18"
  NPM_VERSION = "9"
  NODE_ENV = "production"

[build.processing]
  CSS_MINIFY = true
  JS_MINIFY = true
  HTML_MINIFY = true
  IMAGE_OPTIMIZE = true

[build.redirects]
  FROM = "/*"
  TO = "/404.html"
  STATUS = 404

[[redirects]]
  from = "/blog/*"
  to = "/blog/"
  status = 301
  force = true

[[redirects]]
  from = "/projects/*"
  to = "/projects/"
  status = 301
  force = true

[[redirects]]
  from = "/achievements/*"
  to = "/achievements/"
  status = 301
  force = true

[[redirects]]
  from = "/speaking/*"
  to = "/speaking/"
  status = 301
  force = true

[[redirects]]
  from = "/diagrams/*"
  to = "/diagrams/"
  status = 301
  force = true

[[redirects]]
  from = "/leadership/*"
  to = "/leadership/"
  status = 301
  force = true

[[redirects]]
  from = "/innovation/*"
  to = "/innovation/"
  status = 301
  force = true

[[redirects]]
  from = "/robotics/*"
  to = "/robotics/"
  status = 301
  force = true

[[redirects]]
  from = "/n8nchief/*"
  to = "/n8nchief/"
  status = 301
  force = true

 # Form settings
[context.production.environment]
  NODE_ENV = "production"

# Redirects for form success
[[redirects]]
  from = "/thank-you"
  to = "/thank-you/"
  status = 200

# Enable form detection
[functions]
  directory = "netlify/functions" 